<html lang="en">
	<head>
		<style>
		html {
			scroll-behavior: smooth;
		}
		</style>

	</head>
	<body>{% load static %} {% load humanize %}
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Car Showroom</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container">
				<a class="navbar-brand" href="#">Car Showroom</a>
				<div class="ml-auto">
					{% comment %} ----- Here {% endcomment %}                 {% if user.is_authenticated and user.role == "admin" %}
					<a href="{% url 'create_car' %}" class="btn btn-success mr-2">Tambah Mobil</a>
					{% endif %}
					<a href="#trade-in-section" class="btn btn-outline-success ml-2">Trade-In</a>


					<a href="{% url 'car_service' %}" class="btn btn-warning">Tambah data Servis Mobil</a>
				</div>
			</div>
		</nav>
		<div class="container-fluid mt-4">
			<div class="row" id="car-container" data-view="list">
				{% for car in cars %}
				<div class="col-md-6 offset-md-3 mb-4 car-item list-view">
					<div class="card position-relative">
						{% comment %} ----- Here {% endcomment %}
						<form method="POST" action="{% url 'delete_car' car.id %}" style="position: absolute; top: 10px; right: 10px; z-index: 10;">
							{% csrf_token %}
							<button type="submit" onclick="return confirm('Yakin ingin menghapus mobil ini?')" class="btn btn-link text-danger p-0" style="font-size: 1.5rem;">Ã—</button>
						</form>
						{% comment %} ----- Here {% endcomment %}
						<a href="{% url 'detail_car' car.id %}" class="text-decoration-none text-dark" style="font-weight: normal; text-decoration: none;">
							{% comment %}
						</a>
						<a href="" class="text-decoration-none text-dark" style="font-weight: normal; text-decoration: none;">
							{% endcomment %}
							<div class="row no-gutters">
								<div class="col-md-4">
									{% comment %}
									<img src="{{ car.image.url }}" class="card-img" alt="{{ car.name }}">
									{% endcomment %}
									<img src="https://images.freeimages.com/images/large-previews/a25/japanes-car-1449114.jpg?fmt=webp&amp;w=500" class="card-img h-100 d-block mx-auto" alt="{{ car.nama }}" style="object-fit: cover;">
								</div>
								<div class="col-md-8">
									<div class="card-body">
										<h5 class="card-title">{{ car.nama }}</h5>
										<p class="card-text mb-1">Id: {{ car.id }}</p>
										<p class="card-text mb-1">Merek: {{ car.merek }}</p>
										<p class="card-text mb-1">Model: {{ car.model }}</p>
										<p class="card-text mb-1">Tahun: {{ car.tahun }}</p>
										<p class="card-text mb-1">Harga: Rp.{{ car.harga|floatformat:0|intcomma }}</p>
									</div>
								</div>
							</div>
						</a>
					</div>
					<a href="" class="text-decoration-none text-dark" style="font-weight: normal; text-decoration: none;">
					</a>
				</div>
				<a href="" class="text-decoration-none text-dark" style="font-weight: normal; text-decoration: none;">
					{% endfor %}
				</a>
			</div>
			<div id="trade-in-section" class="row mt-5">
				<div class="col-lg-8 offset-lg-2">
					<div class="card shadow-lg border-0">
						<div class="card-header bg-success text-white">
							<h3 class="mb-0">Trade-In Car Form</h3>
						</div>
						<div class="card-body bg-light">
							<form method="POST" id="tradeInForm">
								{% csrf_token %}
								{{ order_form.non_field_errors }}
								<!-- Step 1: Vehicle Info -->
								<div id="step1">
									<h5 class="mb-3">Vehicle Information</h5>
									<div class="row g-3">
										<div class="col-md-6">
											{% comment %} <label for="carModel" class="form-label">Model</label>
											<input type="text" class="form-control" id="carModel" required=""> {% endcomment %}
											{{ order_form.offered_vehicle_model.label_tag }}
											{{ order_form.offered_vehicle_model }}
										</div>
										<div class="col-md-6">
											{% comment %} <label for="carYear" class="form-label">Year</label>
											<input type="number" class="form-control" id="carYear" required=""> {% endcomment %}
											{{ order_form.offered_vehicle_varian.label_tag }}
											{{ order_form.offered_vehicle_varian }}
										</div>
										<div class="col-md-6">
											{% comment %} <label for="carKilometers" class="form-label">Kilometers</label>
											<input type="number" class="form-control" id="carKilometers" required=""> {% endcomment %}
											{{ order_form.offered_vehicle_transmission.label_tag }}
											{{ order_form.offered_vehicle_transmission }}
										</div>
										<div class="col-md-6">
											{% comment %} <label for="carColor" class="form-label">Color</label>
											<input type="text" class="form-control" id="carColor"> {% endcomment %}
											{{ order_form.offered_vehicle_province.label_tag }}
											{{ order_form.offered_vehicle_province }}
										</div>
										<div class="col-md-6">
											{% comment %} <label for="carTransmission" class="form-label">Transmission</label>
											<select id="carTransmission" class="form-select">
												<option>Automatic</option>
												<option>Manual</option>
											</select> {% endcomment %}
											{{ order_form.offered_vehicle_year.label_tag }}
											{{ order_form.offered_vehicle_year }}
										</div>
										<div class="col-md-6">											
											{{ order_form.offered_vehicle_kilometers.label_tag }}
											{{ order_form.offered_vehicle_kilometers }}
										</div>
										{% comment %} <div class="col-md-6">
											<label for="carFuel" class="form-label">Fuel Type</label>
											<select id="carFuel" class="form-select">
												<option>Petrol</option>
												<option>Diesel</option>
												<option>Hybrid</option>
												<option>Electric</option>
											</select>
										</div> {% endcomment %}
										<div class="col-md-6">
											{% comment %} <label for="carVIN" class="form-label">VIN (optional)</label>
											<input type="text" class="form-control" id="carVIN"> {% endcomment %}
											{{ order_form.offered_vehicle_notes.label_tag }}
											{{ order_form.offered_vehicle_notes }}
										</div>
										
									</div>
									<div class="d-flex justify-content-end mt-4">
										<button type="button" class="btn btn-success" onclick="nextStep()">Next</button>
									</div>
								</div>
								
								<!-- Step 2: Customer Info -->
								<div id="step2" style="display: none;">
									<h5 class="mb-3">Customer Contact Information</h5>
									<div class="row g-3">
										<div class="col-md-6">
											{% comment %} <label for="custName" class="form-label">Full Name</label>
											<input type="text" class="form-control" id="custName" required=""> {% endcomment %}
											{{ trade_in_forms.name.label_tag }}
											{{ trade_in_forms.name }}
										</div>
										<div class="col-md-6">
											{% comment %} <label for="custPhone" class="form-label">Phone Number</label>
											<input type="tel" class="form-control" id="custPhone" required=""> {% endcomment %}
											{{ trade_in_forms.phone_number.label_tag }}
											{{ trade_in_forms.phone_number }}
										</div>
										<div class="col-md-6">
											{% comment %} <label for="custEmail" class="form-label">Email</label>
											<input type="email" class="form-control" id="custEmail" required=""> {% endcomment %}
											{{ trade_in_forms.email.label_tag }}
											{{ trade_in_forms.email }}
										</div>
										<div class="col-md-6">
											{% comment %} <label for="custAddress" class="form-label">Address</label>
											<textarea class="form-control" id="custAddress" rows="2"></textarea> {% endcomment %}
											{{ trade_in_forms.address.label_tag }}
											{{ trade_in_forms.address }}
										</div>
									</div>
									<div class="d-flex justify-content-between mt-4">
										<button type="button" class="btn btn-secondary" onclick="prevStep()">Previous</button>
										<button type="submit" class="btn btn-success">Submit</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<a href="" class="text-decoration-none text-dark" style="font-weight: normal; text-decoration: none;"></a>
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
		
		<script src="{% static 'cars/js/custom.js' %}"></script>
	</body>
</html>